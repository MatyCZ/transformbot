<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Conversions - TransformBot</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <style>
    :root {
      --primary-color: #0d6efd;
      --secondary-color: #f8f9fa;
      --dark-color: #212529;
      --light-color: #f8f9fa;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: var(--dark-color);
    }
    .hero {
      background-color: var(--primary-color);
      color: white;
      padding: 2rem 0;
      margin-bottom: 2rem;
    }
    .navbar {
      background-color: var(--dark-color);
    }
    pre {
      background-color: #f5f5f5;
      border-radius: 5px;
      padding: 1rem;
      margin: 1rem 0;
    }
    code {
      font-family: 'Courier New', Courier, monospace;
      color: #d63384;
    }
    .footer {
      background-color: var(--dark-color);
      color: white;
      padding: 2rem 0;
      margin-top: 3rem;
    }
    .sidebar {
      position: sticky;
      top: 20px;
    }
    .sidebar .nav-link {
      padding: 0.25rem 0;
      color: var(--dark-color);
    }
    .sidebar .nav-link:hover, .sidebar .nav-link.active {
      color: var(--primary-color);
    }
    .example-box {
      background-color: #f8f9fa;
      border-radius: 5px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
    <div class="container">
      <a class="navbar-brand" href="./index.html">TransformBot</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="./index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link active" href="./conversions.html">Conversions</a></li>
          <li class="nav-item"><a class="nav-link" href="./actions.html">Actions</a></li>
          <li class="nav-item"><a class="nav-link" href="https://github.com/MatyCZ/transformbot" target="_blank">GitHub</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <section class="hero">
    <div class="container">
      <h1>Conversions</h1>
      <p class="lead">Core functions for type conversions in TransformBot</p>
    </div>
  </section>

  <main class="container">
    <div class="row">
      <div class="col-lg-3">
        <div class="sidebar">
          <nav class="nav flex-column">
            <a class="nav-link" href="#overview">Overview</a>
            <a class="nav-link" href="#array">array()</a>
            <a class="nav-link" href="#boolean">boolean()</a>
            <a class="nav-link" href="#date">date()</a>
            <a class="nav-link" href="#number">number()</a>
            <a class="nav-link" href="#string">string()</a>
          </nav>
        </div>
      </div>

      <div class="col-lg-9">
        <section id="overview" class="mb-5">
          <h2>Overview</h2>
          <p>
            Conversions are the core functions in TransformBot that transform input values into specific data types. 
            They handle various input formats and ensure type safety with consistent output types.
          </p>
          <p>
            All conversion functions follow a similar pattern: they analyze the input value and attempt to convert it to 
            the target type. If conversion is not possible, they typically return null or apply fallback behavior.
          </p>
        </section>

        <section id="array" class="mb-5">
          <h2>array()</h2>
          <h5 class="text-muted">Converts an input to an Array</h5>

          <div class="mb-4">
            <h4>Description</h4>
            <p>
              The <code>array()</code> function converts various input types into an array. It can accept an optional
              transformation that will be applied to each element of the resulting array.
            </p>
          </div>

          <div class="mb-4">
            <h4>Signature</h4>
            <pre><code>function array&lt;TItem = unknown&gt;(itemSchema?: Transformation&lt;unknown, TItem&gt;): Conversion&lt;unknown, TItem[]&gt;</code></pre>
          </div>

          <div class="mb-4">
            <h4>Parameters</h4>
            <ul>
              <li><code>itemSchema</code> (optional) - A transformation to apply to each item in the array</li>
            </ul>
          </div>

          <div class="mb-4">
            <h4>Returns</h4>
            <p>A conversion function that transforms inputs to arrays</p>
          </div>

          <div class="mb-4">
            <h4>Behavior</h4>
            <ul>
              <li>If the input is already an array, it returns the array (applying the item schema if provided)</li>
              <li>If the input is <code>null</code> or <code>undefined</code>, it returns <code>null</code></li>
              <li>Otherwise, it creates a new array containing the input as its only element</li>
            </ul>
          </div>

          <div class="example-box">
            <h4>Example</h4>
            <pre><code>import * as tb from 'transformbot';

// Basic array conversion
const convert = tb.array();
convert([1, 2, 3]); // [1, 2, 3]
convert("hello"); // ["hello"]
convert(null); // null

// With item transformation
const convertToStringArray = tb.array(tb.string());
convertToStringArray([1, true, "hello"]); // ["1", "true", "hello"]

// Practical example - handling form data
const tagsSchema = tb.pipe(
  tb.array(tb.pipe(tb.string(), tb.trim())),
  tb.toNull()
);

const processFormData = (data) => {
  return {
    // ... other fields
    tags: tb.transform(tagsSchema, data.tags)
  };
};</code></pre>
          </div>
        </section>

        <section id="boolean" class="mb-5">
          <h2>boolean()</h2>
          <h5 class="text-muted">Converts an input to a boolean value</h5>

          <div class="mb-4">
            <h4>Description</h4>
            <p>
              The <code>boolean()</code> function converts various input types into a boolean value, handling
              common string representations like "true", "yes", "false", "no", as well as numeric values.
            </p>
          </div>

          <div class="mb-4">
            <h4>Signature</h4>
            <pre><code>function boolean(): Conversion&lt;unknown, boolean&gt;</code></pre>
          </div>

          <div class="mb-4">
            <h4>Returns</h4>
            <p>A conversion function that transforms inputs to boolean values</p>
          </div>

          <div class="mb-4">
            <h4>Behavior</h4>
            <ul>
              <li>If the input is already a boolean, it returns the input</li>
              <li>If the input is <code>null</code> or <code>undefined</code>, it returns <code>null</code></li>
              <li>If the input is a number, <code>0</code> becomes <code>false</code>, other numbers become <code>true</code></li>
              <li>If the input is a string, it recognizes various formats:</li>
              <ul>
                <li>"true", "yes", "1" become <code>true</code></li>
                <li>"false", "no", "0" become <code>false</code></li>
                <li>Case-insensitive comparison is used</li>
              </ul>
              <li>Other inputs return <code>null</code></li>
            </ul>
          </div>

          <div class="example-box">
            <h4>Example</h4>
            <pre><code>import * as tb from 'transformbot';

const convert = tb.boolean();

// Boolean inputs
convert(true); // true
convert(false); // false

// Number inputs
convert(0); // false
convert(1); // true
convert(42); // true

// String inputs
convert("true"); // true
convert("YES"); // true (case-insensitive)
convert("1"); // true
convert("false"); // false
convert("no"); // false
convert("0"); // false

// Invalid inputs
convert(null); // null
convert("maybe"); // null
convert({}); // null

// Practical example - processing checkbox data
const subscribeSchema = tb.pipe(
  tb.boolean(),
  tb.toDefault(false) // Default to false if null
);

function processFormData(data) {
  return {
    // ... other fields
    subscribed: tb.transform(subscribeSchema, data.subscribe)
  };
}</code></pre>
          </div>
        </section>

        <section id="date" class="mb-5">
          <h2>date()</h2>
          <h5 class="text-muted">Converts an input to a Date object</h5>

          <div class="mb-4">
            <h4>Description</h4>
            <p>
              The <code>date()</code> function converts various input types into a JavaScript Date object,
              handling date strings, timestamps, and existing Date objects.
            </p>
          </div>

          <div class="mb-4">
            <h4>Signature</h4>
            <pre><code>function date(): Conversion&lt;unknown, Date&gt;</code></pre>
          </div>

          <div class="mb-4">
            <h4>Returns</h4>
            <p>A conversion function that transforms inputs to Date objects</p>
          </div>

          <div class="mb-4">
            <h4>Behavior</h4>
            <ul>
              <li>If the input is already a Date object, it returns a new Date with the same time value</li>
              <li>If the input is <code>null</code> or <code>undefined</code>, it returns <code>null</code></li>
              <li>If the input is a number, it treats it as a timestamp (milliseconds since epoch)</li>
              <li>If the input is a string, it attempts to parse it as a date using <code>Date.parse()</code></li>
              <li>If parsing fails or results in an invalid date, it returns <code>null</code></li>
            </ul>
          </div>

          <div class="example-box">
            <h4>Example</h4>
            <pre><code>import * as tb from 'transformbot';

const convert = tb.date();

// Date object
const now = new Date();
convert(now); // New Date object with same time as 'now'

// Timestamp (milliseconds)
convert(1609459200000); // Date representing 2021-01-01T00:00:00.000Z

// Date strings
convert("2023-06-15"); // Date representing 2023-06-15T00:00:00.000Z
convert("Jun 15, 2023"); // Date representing 2023-06-15T00:00:00.000Z

// Invalid inputs
convert(null); // null
convert("not a date"); // null
convert({}); // null

// Practical example - processing date inputs with validation
const birthDateSchema = tb.pipe(
  tb.date(),
  tb.toNull(), // Convert invalid dates to null
  // Optional: Add validation for date range
  tb.toMinValue(new Date(1900, 0, 1)),
  tb.toMaxValue(new Date()) // Cannot be in the future
);

function processUserData(data) {
  return {
    // ... other fields
    birthDate: tb.transform(birthDateSchema, data.birthDate)
  };
}</code></pre>
          </div>
        </section>

        <section id="number" class="mb-5">
          <h2>number()</h2>
          <h5 class="text-muted">Converts an input to a number</h5>

          <div class="mb-4">
            <h4>Description</h4>
            <p>
              The <code>number()</code> function converts various input types into a numeric value, handling
              string representations with different formats and other numeric types.
            </p>
          </div>

          <div class="mb-4">
            <h4>Signature</h4>
            <pre><code>function number(): Conversion&lt;unknown, number&gt;</code></pre>
          </div>

          <div class="mb-4">
            <h4>Returns</h4>
            <p>A conversion function that transforms inputs to numbers</p>
          </div>

          <div class="mb-4">
            <h4>Behavior</h4>
            <ul>
              <li>If the input is already a number, it returns the input</li>
              <li>If the input is <code>null</code> or <code>undefined</code>, it returns <code>null</code></li>
              <li>If the input is a BigInt, it converts it to a number</li>
              <li>If the input is a string:</li>
              <ul>
                <li>It trims whitespace and removes thousand separators</li>
                <li>It converts comma decimal separators to periods</li>
                <li>It attempts to parse the result using <code>parseFloat()</code></li>
              </ul>
              <li>If parsing fails or results in NaN, it returns <code>null</code></li>
              <li>Other input types return <code>null</code></li>
            </ul>
          </div>

          <div class="example-box">
            <h4>Example</h4>
            <pre><code>import * as tb from 'transformbot';

const convert = tb.number();

// Number inputs
convert(42); // 42
convert(3.14); // 3.14
convert(0); // 0

// String inputs
convert("42"); // 42
convert("3.14"); // 3.14
convert("1,234.56"); // 1234.56 (removes thousands separator)
convert("1.234,56"); // 1234.56 (handles European format)
convert(" 789 "); // 789 (trims whitespace)

// Other inputs
convert(BigInt(100)); // 100
convert(null); // null
convert("not a number"); // null
convert({}); // null

// Practical example - processing numeric form fields
const priceSchema = tb.pipe(
  tb.number(),
  tb.toNull(), // Convert invalid numbers to null
  tb.toMinValue(0), // Ensure price is not negative
  tb.toFixed(2) // Format with 2 decimal places
);

function processProductData(data) {
  return {
    // ... other fields
    price: tb.transform(priceSchema, data.price)
  };
}</code></pre>
          </div>
        </section>

        <section id="string" class="mb-5">
          <h2>string()</h2>
          <h5 class="text-muted">Converts an input to a string</h5>

          <div class="mb-4">
            <h4>Description</h4>
            <p>
              The <code>string()</code> function converts various input types into a string representation,
              handling all primitive types and some complex types with appropriate string conversions.
            </p>
          </div>

          <div class="mb-4">
            <h4>Signature</h4>
            <pre><code>function string(): Conversion&lt;unknown, string&gt;</code></pre>
          </div>

          <div class="mb-4">
            <h4>Returns</h4>
            <p>A conversion function that transforms inputs to strings</p>
          </div>

          <div class="mb-4">
            <h4>Behavior</h4>
            <ul>
              <li>If the input is already a string, it returns the input unchanged</li>
              <li>If the input is <code>null</code> or <code>undefined</code>, it returns <code>null</code></li>
              <li>If the input is a number, boolean, or BigInt, it converts it to its string representation</li>
              <li>If the input is a Date, it uses the date's <code>toString()</code> method</li>
              <li>If the input has a custom <code>toString()</code> method, it uses that method</li>
              <li>Otherwise, it attempts to use the standard <code>String()</code> conversion</li>
            </ul>
          </div>

          <div class="example-box">
            <h4>Example</h4>
            <pre><code>import * as tb from 'transformbot';

const convert = tb.string();

// String inputs
convert("hello"); // "hello"
convert(""); // "" (empty string)

// Number inputs
convert(42); // "42"
convert(3.14); // "3.14"

// Boolean inputs
convert(true); // "true"
convert(false); // "false"

// Date inputs
convert(new Date(2023, 5, 15)); // String representation of the date

// Other inputs
convert(null); // null
convert(undefined); // null
convert({}); // "[object Object]" or custom toString result

// Practical example - processing user input
const usernameSchema = tb.pipe(
  tb.string(),
  tb.trim(),
  tb.toNull(), // Convert empty strings to null
  // Additional transformations as needed
  tb.toAlphanumeric() // Remove special characters
);

function processUserData(data) {
  return {
    // ... other fields
    username: tb.transform(usernameSchema, data.username)
  };
}</code></pre>
          </div>
        </section>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container text-center">
      <p>© 2025 TransformBot | Created by Matej Szendi</p>
      <p>License: <a href="https://opensource.org/licenses/MIT" class="text-white">MIT</a> | <a href="https://github.com/MatyCZ/transformbot" class="text-white" target="_blank">GitHub Repository</a></p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Highlight active link in sidebar based on scroll position
      const sections = document.querySelectorAll('section');
      const navLinks = document.querySelectorAll('.sidebar .nav-link');

      window.addEventListener('scroll', function() {
        let current = '';

        sections.forEach(section => {
          const sectionTop = section.offsetTop - 100;
          if (window.pageYOffset >= sectionTop) {
            current = section.getAttribute('id');
          }
        });

        navLinks.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === `#${current}`) {
            link.classList.add('active');
          }
        });
      });
    });
  </script>
</body>
</html>
